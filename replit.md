# WealthMate - Financial Management Application

## Overview
WealthMate is a smart financial management application that helps users track budgets, manage investments, and receive AI-powered financial advice. The application features user authentication, profile management, budget tracking, investment portfolio management, and an AI assistant with real-time stock data.

## Project Architecture

### Tech Stack
- **Backend**: Python with FastAPI
- **Frontend**: HTML, CSS, JavaScript (Vanilla)
- **Database**: PostgreSQL (Neon-backed via Replit)
- **Authentication**: JWT (JSON Web Tokens)
- **Password Security**: PBKDF2-HMAC-SHA256 with 100,000 iterations and unique salts
- **AI Integration**: OpenAI GPT-3.5 for financial advice
- **Stock Data**: Yahoo Finance API (yfinance) for real-time prices

### Current Setup (September 30, 2025)

#### Server Configuration
- **Port**: 5000 (configured for Replit environment)
- **Host**: 0.0.0.0 (to work with Replit's proxy)
- **Main File**: backend/main.py
- **Framework**: FastAPI with Uvicorn ASGI server
- **Environment**: Uses .env file for configuration
- **Auto-reload**: Enabled for development

#### Database
- **Type**: PostgreSQL (Neon-hosted via Replit)
- **ORM**: SQLAlchemy for database operations
- **Models**: User, Portfolio, Stock, Transaction, ChatHistory, Budget, FinancialGoal
- **Migrations**: Automatic table creation on startup
- **Connection**: Environment variables managed by Replit

#### Key Features
1. **User Authentication**
   - Registration and login with JWT
   - Password hashing with bcryptjs
   - Token-based authentication

2. **Profile Management**
   - User profile updates
   - Profile information storage

3. **Budget Tracking**
   - Expense and income tracking
   - Budget analysis

4. **Investment Portfolio**
   - Stock portfolio management
   - Investment tracking

5. **AI Assistant**
   - Financial advice using OpenAI API
   - Chat interface for user queries

6. **Financial Goals**
   - Goal setting and tracking

### File Structure
```
.
├── backend/
│   ├── main.py              # FastAPI application entry point
│   ├── database.py          # Database connection and session management
│   ├── models/              # SQLAlchemy database models
│   │   ├── user.py          # User model
│   │   ├── portfolio.py     # Portfolio, Stock, Transaction models
│   │   ├── chat.py          # ChatHistory model
│   │   └── budget.py        # Budget and FinancialGoal models
│   ├── schemas/             # Pydantic schemas for validation
│   │   ├── user.py          # User schemas
│   │   ├── portfolio.py     # Portfolio and stock schemas
│   │   └── ai.py            # AI and recommendation schemas
│   ├── routes/              # API route handlers
│   │   ├── auth.py          # Authentication endpoints
│   │   ├── profile.py       # User profile management
│   │   ├── portfolio.py     # Portfolio management
│   │   ├── ai.py            # AI recommendations
│   │   └── budget.py        # Budget and goals
│   └── services/            # Business logic
│       ├── auth.py          # JWT and password hashing
│       ├── ai_service.py    # OpenAI integration
│       ├── stock_service.py # Yahoo Finance integration
│       └── portfolio_service.py # Portfolio analytics
├── wealthmate.html          # Main landing page
├── login.html               # Login page
├── signup.html              # Registration page
├── profile.html             # User profile page
├── budget.html              # Budget tracking page
├── graph.html               # Financial graphs/charts
├── investment-portfolio.html # Investment management
├── ai-assistant.html        # AI chat interface
├── smart121.css             # Main stylesheet
├── hyyy.css                 # Additional styles
├── smart2.js                # Main JavaScript
├── jsf.js                   # Additional JavaScript
├── chat.js                  # Chat functionality
├── graph.js                 # Graph/chart functionality
└── .env                     # Environment variables
```

## Recent Changes (September 30, 2025)

### Major Backend Rewrite - Python FastAPI Implementation

1. **Complete Backend Replacement**
   - Replaced Node.js/Express with Python/FastAPI
   - Implemented proper async/await patterns
   - Added comprehensive API documentation (auto-generated by FastAPI)
   - Configured CORS and cache control middleware

2. **Database Integration**
   - Implemented PostgreSQL database with SQLAlchemy ORM
   - Created complete data models for all entities
   - Set up automatic database migrations
   - Connected to Replit's managed PostgreSQL instance

3. **Authentication System**
   - JWT-based authentication with Bearer tokens
   - PBKDF2-HMAC-SHA256 password hashing with 100,000 iterations and unique salts
   - Token expiration (1 hour by default)
   - Protected routes with dependency injection
   - Production-ready security implementation

4. **Investment Portfolio Features**
   - Real-time stock prices via Yahoo Finance API
   - Historical data fetching for charting
   - Profit/loss calculations per stock
   - Portfolio performance analytics
   - Diversification scoring and risk assessment

5. **AI Integration**
   - OpenAI GPT-3.5 integration for financial advice
   - Portfolio analysis with AI recommendations
   - Risk assessment automation
   - Investment suggestion engine
   - Chat history persistence in database

6. **API Endpoints Implemented**
   - `/api/register` - User registration
   - `/api/login` - User login with JWT
   - `/api/profile/update` - Profile management
   - `/api/portfolio/add` - Add stocks to portfolio
   - `/api/portfolio/stocks` - Get all user stocks
   - `/api/portfolio/analytics` - Portfolio performance
   - `/api/stock/{symbol}/price` - Real-time stock price
   - `/api/stock/{symbol}/history` - Historical data
   - `/api/stock/{symbol}/info` - Stock information
   - `/api/ai/advice` - AI financial advice
   - `/api/ai/portfolio-analysis` - AI portfolio analysis
   - `/api/ai/risk-assessment` - Portfolio risk assessment
   - `/api/budget/*` - Budget and goals endpoints

7. **Frontend URL Updates**
   - Changed all `http://localhost:3000` references to relative paths
   - Updated fetch URLs in: login.html, signup.html, profile.html, chat.js, smart2.js
   - Ensures compatibility with Replit's proxy system

8. **Project Setup**
   - Created .gitignore for Python project
   - Configured workflow for FastAPI server on port 5000
   - Set up deployment configuration (autoscale)
   - Installed Python dependencies (FastAPI, SQLAlchemy, yfinance, openai, etc.)

## Deployment
- **Type**: Autoscale deployment
- **Command**: `python -m backend.main`
- **Port**: 5000
- Ready for production deployment

## Known Issues & Future Enhancements

### Current Issues
- Some JavaScript errors in browser console (non-critical):
  - querySelector errors in smart2.js
  - Missing 'today' variable in graph.js
  - Null reference errors in jsf.js
- These don't affect core functionality

### Future Enhancements
1. **Database Integration**
   - Replace in-memory storage with persistent database
   - Consider MongoDB (as originally intended) or PostgreSQL
   - Implement proper data models and migrations

2. **API Integrations**
   - Complete OpenAI integration for AI assistant
   - Add real stock market data APIs
   - Implement banking API integrations

3. **Security Improvements**
   - Move JWT_SECRET to environment variables (currently using default)
   - Implement refresh tokens
   - Add rate limiting for API endpoints

4. **Bug Fixes**
   - Fix JavaScript errors in graph.js and jsf.js
   - Improve error handling throughout the application

## User Preferences
- No specific preferences documented yet

## Environment Variables
Required environment variables (in .env):
- `PORT`: Server port (default: 5000)
- `JWT_SECRET`: Secret key for JWT tokens
- `OPENAI_API_KEY`: OpenAI API key for AI features
- `MONGODB_URI`: MongoDB connection string (future use)
